# 1.全局锁和表锁 ：给表加个字段怎么有这么多阻碍？

## 1.1.带着问题学习

1.MySQL从加锁范围上分为哪三类?

2.全局锁加锁方法的执行命令是什么?主要的应用场景是什么?

3.做整库备份时为什么要加全局锁?

4.MySQL的自带备份工具, 使用什么参数可以确保一致性视图, 在什么场景下不适用?

5.不建议使用set global readonly = true的方法加全局锁有哪两点原因?

6.表级锁有哪两种类型? 各自的使用场景是什么?

7.MDL中读写锁之间的互斥关系怎样的?

8.如何安全的给小表增加字段?

## 1.2.基本介绍

今天我要跟你聊聊 MySQL 的锁。数据库锁设计的初衷是处理并发问题。作为多用户共享的资源，当出现并发访问的时候，数据库需要合理地控制资源的访问规则。而锁就是用来实现这些访问规则的重要数据结构。

**根据加锁的范围，MySQL 里面的锁大致可以分成全局锁、表级锁和行锁三类。**今天这篇文章，我会和你分享全局锁和表级锁。而关于行锁的内容，我会留着在下一篇文章中再和你详细介绍。

这里需要说明的是，锁的设计比较复杂，这两篇文章不会涉及锁的具体实现细节，主要介绍的是碰到锁时的现象和其背后的原理。

### 全局锁

顾名思义，全局锁就是对整个数据库实例加锁。MySQL 提供了一个加全局读锁的方法，命令是 Flush tables with read lock \(FTWRL\)。当你需要让整个库处于只读状态的时候，可以使用这个命令，之后其他线程的以下语句会被阻塞：数据更新语句（数据的增删改）、数据定义语句（包括建表、修改表结构等）和更新类事务的提交语句。

全局锁的典型使用场景是，做全库逻辑备份。也就是把整库每个表都 select 出来存成文本。

以前有一种做法，是通过 FTWRL 确保不会有其他线程对数据库做更新，然后对整个库做备份。注意，在备份过程中整个库完全处于只读状态。

### 表级锁

### 小结

# 2.总结

## 2.1.问题



